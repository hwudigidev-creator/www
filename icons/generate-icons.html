<!DOCTYPE html>
<html>
<head>
  <title>生成 PWA 圖示</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #222; color: #fff; }
    .icon-preview { display: inline-block; margin: 10px; text-align: center; }
    .icon-preview canvas { border: 1px solid #444; }
    .icon-preview p { margin: 5px 0; font-size: 12px; }
    button { padding: 10px 20px; margin: 10px 5px; cursor: pointer; background: #00d4ff; border: none; color: #000; font-weight: bold; }
    button:hover { background: #00a8cc; }
    #status { margin-top: 20px; padding: 10px; background: #333; }
  </style>
</head>
<body>
  <h1>DIGI WAR PWA 圖示生成器</h1>
  <p>點擊「生成所有圖示」按鈕，然後右鍵點擊每個圖示並「另存圖片」到 icons 資料夾。</p>

  <button onclick="generateAll()">生成所有圖示</button>
  <button onclick="downloadAll()">下載所有圖示 (ZIP)</button>

  <div id="icons"></div>
  <div id="status"></div>

  <script>
    const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
    const svgContent = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
      <defs>
        <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#1a1a2e"/>
          <stop offset="100%" style="stop-color:#0f0f1a"/>
        </linearGradient>
        <linearGradient id="glow" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#00d4ff"/>
          <stop offset="50%" style="stop-color:#7b2cbf"/>
          <stop offset="100%" style="stop-color:#ff006e"/>
        </linearGradient>
      </defs>
      <rect width="512" height="512" rx="80" fill="url(#bg)"/>
      <circle cx="256" cy="256" r="180" fill="none" stroke="url(#glow)" stroke-width="8" opacity="0.6"/>
      <polygon points="256,100 366,178 366,334 256,412 146,334 146,178" fill="none" stroke="url(#glow)" stroke-width="6"/>
      <path d="M180,180 L180,332 L260,332 C320,332 350,290 350,256 C350,222 320,180 260,180 Z M220,220 L260,220 C290,220 310,235 310,256 C310,277 290,292 260,292 L220,292 Z" fill="url(#glow)"/>
      <circle cx="400" cy="140" r="6" fill="#00d4ff" opacity="0.8"/>
      <circle cx="120" cy="380" r="4" fill="#7b2cbf" opacity="0.8"/>
      <circle cx="380" cy="400" r="5" fill="#ff006e" opacity="0.8"/>
      <circle cx="140" cy="120" r="4" fill="#00d4ff" opacity="0.6"/>
    </svg>`;

    function generateAll() {
      const container = document.getElementById('icons');
      container.innerHTML = '';

      const img = new Image();
      const svgBlob = new Blob([svgContent], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(svgBlob);

      img.onload = () => {
        sizes.forEach(size => {
          const div = document.createElement('div');
          div.className = 'icon-preview';

          const canvas = document.createElement('canvas');
          canvas.width = size;
          canvas.height = size;
          canvas.id = `icon-${size}`;

          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0, size, size);

          const p = document.createElement('p');
          p.textContent = `icon-${size}x${size}.png`;

          const link = document.createElement('a');
          link.href = canvas.toDataURL('image/png');
          link.download = `icon-${size}x${size}.png`;
          link.textContent = '下載';
          link.style.cssText = 'display:block;color:#00d4ff;margin-top:5px;';

          div.appendChild(canvas);
          div.appendChild(p);
          div.appendChild(link);
          container.appendChild(div);
        });

        URL.revokeObjectURL(url);
        document.getElementById('status').textContent = '✓ 所有圖示已生成！點擊「下載」連結或右鍵另存圖片。';
      };

      img.src = url;
    }

    async function downloadAll() {
      const status = document.getElementById('status');
      status.textContent = '正在準備下載...';

      // 先生成圖示
      generateAll();

      // 等待圖示生成
      await new Promise(resolve => setTimeout(resolve, 500));

      // 逐個下載
      sizes.forEach((size, index) => {
        setTimeout(() => {
          const canvas = document.getElementById(`icon-${size}`);
          if (canvas) {
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            link.download = `icon-${size}x${size}.png`;
            link.click();
          }
        }, index * 300);
      });

      status.textContent = '✓ 正在下載所有圖示...';
    }

    // 自動生成
    generateAll();
  </script>
</body>
</html>
